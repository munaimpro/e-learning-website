var y=Object.defineProperty;var w=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var I=(i,s,t)=>s in i?y(i,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[s]=t,b=(i,s)=>{for(var t in s||(s={}))L.call(s,t)&&I(i,t,s[t]);if(w)for(var t of w(s))z.call(s,t)&&I(i,t,s[t]);return i};import{r as n,j as e,_ as N,L as k,ba as A,c as _,w as C,v as T,S as F}from"./main-601.js";import"./bf-548-69.js";import{b as E}from"./bf-92-74.js";import{I as B}from"./bf-242-329.js";import{N as v}from"./bf-273-399.js";import{t as M}from"./bf-305-185.js";import{T as H}from"./bf-218-119.js";import{A as $}from"./bf-126-398.js";import{M as q,c as D,r as R}from"./bf-268-373.js";import"./bf-409-72.js";function G({mailPoetConf:i,setMailPoetConf:s,step:t,nextPage:g,setSnackbar:x,isInfo:d}){const[h,u]=n.useState(!1),[o,p]=n.useState({integrationName:""}),[j,r]=n.useState(!1),[a,m]=n.useState(!1),f=()=>{m("auth"),_({},"bitforms_mail_poet_authorize").then(l=>{l!=null&&l.success&&(u(!0),x({show:!0,msg:N("Authorized Successfully")})),r(!0),m(!1)})},c=l=>{const P=b({},i),S=b({},o);S[l.target.name]="",P[l.target.name]=l.target.value,p(S),s(P)};return e.jsxs(e.Fragment,{children:[e.jsx(H,{title:M.mailPoet.title,youTubeLink:M.mailPoet.link}),e.jsxs("div",{className:"btcd-stp-page",style:{width:t===1&&900,height:t===1&&"100%"},children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:N("Integration Name:")})}),e.jsx("input",{"aria-label":"Integration Name",className:"btcd-paper-inp w-6 mt-1",onChange:c,name:"name",value:i.name,type:"text",placeholder:N("Integration Name..."),disabled:d}),a==="auth"&&e.jsxs("div",{className:"flx mt-5",children:[e.jsx(k,{size:25,clr:"#022217",className:"mr-2"}),"Checking if MailPoet is active!!!"]}),j&&!h&&!a&&e.jsxs("div",{className:"flx mt-5",style:{color:"red"},children:[e.jsx("span",{className:"mr-2",style:{fontSize:30,marginTop:-5},children:e.jsx(A,{size:"15"})}),"Please! First Install Mailpoet Plugins"]}),e.jsx($,{handleAuthorize:f,isAuthorized:h,isLoading:a}),e.jsx("br",{}),e.jsx(v,{nextPageHandler:()=>g(2),disabled:!h})]})]})}function te({formFields:i,setIntegration:s,integrations:t,allIntegURL:g}){const x=C(),{formID:d}=T(),[h,u]=n.useState(!1),[o,p]=n.useState(1),[j,r]=n.useState({show:!1}),[a,m]=n.useState({name:"Mail Poet",type:"Mail Poet",field_map:[{formField:"",mailPoetField:""}],actions:{}}),f=c=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),c===3){if(!D(a)){r({show:!0,msg:"Please map all required fields to continue."});return}a.name!==""&&a.field_map.length>0&&p(c)}else p(c),c===2&&a.name&&R(d,a,m,u,r)};return e.jsxs("div",{children:[e.jsx(F,{snack:j,setSnackbar:r}),e.jsx("div",{className:"txt-center w-9 mt-2 cal-width"}),e.jsx(G,{formID:d,mailPoetConf:a,setMailPoetConf:m,step:o,nextPage:f,isLoading:h,setisLoading:u,setSnackbar:r}),e.jsxs("div",{className:"btcd-stp-page",style:{width:o===2&&900,height:o===2&&"100%",minHeight:o===2&&"200px"},children:[e.jsx(q,{formID:d,formFields:i,mailPoetConf:a,setMailPoetConf:m,setSnackbar:r}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx(v,{nextPageHandler:()=>f(3),disabled:a.lists===""||a.field_map.length<1})]}),e.jsx(B,{step:o,saveConfig:()=>E(t,s,g,a,x)})]})}export{te as default};
