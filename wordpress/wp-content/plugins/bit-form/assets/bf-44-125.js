var S=Object.defineProperty,M=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var w=(a,t,l)=>t in a?S(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,j=(a,t)=>{for(var l in t||(t={}))A.call(t,l)&&w(a,l,t[l]);if(b)for(var l of b(t))E.call(t,l)&&w(a,l,t[l]);return a},y=(a,t)=>M(a,D(t));import{h as I,a9 as O,u as N,r as W,I as f,ab as $,j as e,_ as r,k as c,f as L,e as P,aO as z,at as R,a$ as B,aB as T,g as U,G as C}from"./main-601.js";import{t as F}from"./bf-305-185.js";import{u as G}from"./bf-743-71.js";import{C as d}from"./bf-635-81.js";import"./bf-409-72.js";const Q=()=>{const[a,t]=I(z),l=O(R),g=N(B),_=N(T),[p,u]=W.useState({show:!1,msg:""}),{isLoading:x}=G(["bitforms_get_form_abandonment_config",g],{formID:g},{fetchCondition:f&&$(a),onSuccess:s=>t(s)}),o=(s,m)=>{if(!f)return!0;t(h=>U(h,n=>{if(C(n,s,m),s==="active"&&m&&!("saveFormDraft"in n)&&(n.saveFormDraft=!0,n.saveMode="always"),s==="showWarningMsg"&&m&&!("warningMsg"in n)&&(n.warningMsg="Please note that your information is saved on our server as you enter it."),s==="saveFormDraft"&&(m?n.saveMode="always":delete n.saveMode),s==="saveEmptyFromDraft"&&(m?n.saveEmptyFromDraft=!0:delete n.saveEmptyFromDraft),s==="repopulateForm"&&m&&_.enabled.submission){const k=r('In order to repopulate form fields, it is necessary to store the submitted data in the database. Please make sure to turn off the "disable storing form submission data" option in the form settings.');u({show:!0,msg:k}),delete n.repopulateForm}})),l(h=>y(j({},h),{unsaved:!0}))},v=()=>{u({show:!1})},i={};return a.active?(i.opacity=1,i.pointerEvents="auto",i.userSelect="auto"):(i.opacity=.6,i.pointerEvents="none",i.userSelect="none"),e.jsxs("div",{className:"pos-rel",children:[e.jsxs("div",{className:"flx mt-4",children:[e.jsx("h2",{className:"m-0",children:r("Form Abandonment")}),!x&&e.jsx(c,{name:"status",action:s=>o("active",s.target.checked),checked:a.active||!1,className:"ml-2 flx"})]}),e.jsxs("h5",{className:"mt-3",children:["How to setup Form Abandonment & save partial form progress:",e.jsx("a",{href:F.formAbandonment.link,target:"_blank",rel:"noreferrer",className:"yt-txt ml-1 mr-1",children:"YouTube"}),e.jsx("a",{href:F.formAbandonmentDoc.link,target:"_blank",rel:"noreferrer",className:"doc-txt",children:"Documentation"})]}),!f&&e.jsx("div",{className:"pro-blur flx",style:{height:"111%",left:-53,width:"104%"},children:e.jsxs("div",{className:"pro",children:[r("Available On"),e.jsx("a",{href:"https://www.bitapps.pro/bit-form",target:"_blank",rel:"noreferrer",children:e.jsx("span",{className:"txt-pro",children:r("Premium")})})]})}),x?e.jsx(L,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:70,transform:"scale(0.7)"}}):e.jsx("div",{className:"w-5",children:e.jsxs("div",{style:i,className:"mt-4",children:[e.jsxs("div",{className:"mt-2 mb-2 flx",children:[e.jsx(c,{name:"dflt_temp",action:s=>o("showWarningMsg",s.target.checked),checked:a.showWarningMsg||!1,className:"flx"}),e.jsx("label",{htmlFor:"dflt_temp",children:r("Show warning message below the form description")}),e.jsx(d,{className:"ml-1",icnSize:14,width:600,children:r("Places an admin-defined message below the form description, making your users aware that their field values are being saved before submission.")})]}),a.showWarningMsg&&e.jsx("div",{className:"flx",children:e.jsx("input",{onChange:s=>o("warningMsg",s.target.value),name:"warningMsg",value:a.warningMsg||"",className:"btcd-paper-inp mr-2 w-10",placeholder:"Set warning message",type:"text"})}),e.jsxs("div",{className:`flx ${a.showWarningMsg?"mt-2":"mt-3"}`,children:[e.jsx(c,{name:"disable_loggin_user",action:s=>o("onlyLoggedInUsers",s.target.checked),checked:a.onlyLoggedInUsers||!1,className:"flx"}),e.jsx("label",{htmlFor:"disable_loggin_user",children:r("Save draft only for logged in users")})]}),e.jsxs("div",{className:"mt-3 flx",children:[e.jsx(c,{name:"repopulate_fields",action:s=>o("repopulateForm",s.target.checked),checked:a.repopulateForm||!1,className:"flx"}),e.jsx("label",{htmlFor:"repopulate_fields",children:r("Repopulate form fields with previous partial entry")}),e.jsx(d,{className:"ml-1",icnSize:14,width:600,children:r(`If the user is logged in, the form will be repopulated with the previous partial entry from the database.
                    Otherwise, from the local storage of the browser.
                    `)})]}),e.jsxs("div",{className:"mt-3 flx",children:[e.jsx(c,{name:"save_from_draft",action:s=>o("saveFormDraft",s.target.checked),checked:a.saveFormDraft||!1,className:"flx"}),e.jsx("label",{htmlFor:"save_from_draft",children:r("Save draft when user leaves the form page")}),e.jsx(d,{className:"ml-1",icnSize:14,width:600,children:r(`
                    If turned off, the form will save draft when clicks on the save button or using conditional logic.
                    `)})]}),e.jsxs("div",{className:"mt-3 flx",children:[e.jsx(c,{name:"saveEmptyFromDraft",action:s=>o("saveEmptyFromDraft",s.target.checked),checked:a.saveEmptyFromDraft||!1,className:"flx"}),e.jsx("label",{htmlFor:"saveEmptyFromDraft",children:r("Allow empty form as Save draft")}),e.jsx(d,{className:"ml-1",icnSize:14,width:600,children:r(`
                    If turned on, the empty form save as draft when leave page.
                    `)})]}),!1]})}),e.jsx(P,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"red",btnTxt:"Close",show:p.show,close:v,action:v,title:"Sorry",children:e.jsx("div",{className:"txt-center",children:p.msg})})]})};export{Q as default};
