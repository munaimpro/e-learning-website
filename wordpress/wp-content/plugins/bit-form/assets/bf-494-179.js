var Ke=Object.defineProperty,Qe=Object.defineProperties;var Je=Object.getOwnPropertyDescriptors;var ue=Object.getOwnPropertySymbols;var Ye=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable;var fe=(h,c,u)=>c in h?Ke(h,c,{enumerable:!0,configurable:!0,writable:!0,value:u}):h[c]=u,me=(h,c)=>{for(var u in c||(c={}))Ye.call(c,u)&&fe(h,u,c[u]);if(ue)for(var u of ue(c))Xe.call(c,u)&&fe(h,u,c[u]);return h},be=(h,c)=>Qe(h,Je(c));import{v as Ze,h as ge,q as Te,r as d,u as et,a as $e,i as tt,c as q,j as t,a6 as r,bc as st,L as K,aV as Q,b1 as at,H as lt,cN as nt,ba as it,b as ot,e as ct,ao as rt,aI as dt,aH as pt,g as I,aQ as J,bG as xe,dM as U,G as W,bt as ve,du as je,d as ht}from"./main-601.js";import{S as ut,G as A}from"./bf-184-110.js";import{F as ft}from"./bf-990-142.js";function wt({addPaddingOnSelect:h=!0,iconType:c,setModal:u,selected:we="",uploadLbl:_e="",unsplash:Se=!1,setIconAction:S,removeIconAction:Y}){const{fieldKey:b}=Ze(),[O,B]=ge(rt),f=Te(O[b]),[j,X]=d.useState({parent:we||"Icons"}),[Z,C]=d.useState([]),[L,w]=d.useState(!1),[T,ee]=d.useState(!1),[g,z]=d.useState({}),[F,k]=d.useState([]),[_,ye]=d.useState(""),[Ne,te]=d.useState(!1),[se,ae]=d.useState(!1),le=_e||"Upload Icon",P=et(dt),[Ie,y]=d.useState(10001),[Ce,R]=d.useState(!1),[ke,Be]=d.useState(),{css:l}=$e(),V="https://raw.githack.com",N=d.useRef(),[$,ne]=ge(pt),E="n3pcVfA-CTg4OlOQsM3m6lEWLISyoSbtDqP2CfoukyU",[ie,mt]=d.useState(1),[Le,D]=d.useState([]),[bt,Fe]=d.useState(""),[Pe,gt]=d.useState(1);d.useState("");const oe=[{label:"Icons",show:["label"]},{label:le},{label:"Downloaded Icons"}];Se&&oe.push({label:"Unsplash"});const Ee=[{label:"Font Awesome",value:"t=2_id_fontawesome",id:"font-awesome",status:!1},{label:"Bootstrap",value:"t=2_id_bootstrapicons",id:"bootstrap-icons",status:!1},{label:"Material Design",value:"t=2_id_materialdesign-icons",id:"material-design-icons",status:!1},{label:"Ion",value:"t=2_id_ionicons",id:"ionicons",status:!1},{label:"Octicons",value:"t=2_id_octicons",id:"octicons",status:!1},{label:"CSS.GG",value:"t=2_id_css.gg",id:"css.gg",status:!1},{label:"Feather",value:"t=2_id_feather",id:"feather",status:!1},{label:"Carbon",value:"t=2_id_carbonicons",id:"carbon-icons",status:!1},{label:"Typicons",value:"t=2_id_typicons",id:"typicons",status:!1},{label:"Vscode",value:"t=2_id_vscodecodicons",id:"vscode-codicons",status:!1},{label:"Simple",value:"t=2_id_simpleicons",id:"simple-icons",status:!1}],[x,De]=d.useState(Ee||[]),[G,ce]=d.useState([]),M=()=>{if(_)return"nofilter=true";const e=x.find(i=>i.status===!0);let s="";return e&&(s=x.map(i=>i.value).join("&")),s},He=e=>{te(!0);const s=_!==""?`&t=1_tag_${e}`:"";fetch(`https://icons.bitapps.pro/search?c=0&${M()}${s}`).then(i=>i.json()).then(i=>{var a;if(i){let n=i.results;x.find(p=>p.status)&&(n=n==null?void 0:n.filter(p=>{var m;return(m=x.find(v=>v.id===p.id))==null?void 0:m.status})),k(n),y(i.total)}(a=N==null?void 0:N.current)==null||a.scrollToTop(0),te(!1)})},Ue=tt.useAsyncDebounce(He,500),We=({target:{value:e}})=>{ye(e),Ue(e)},Ae=(e,s)=>{s==="parent"?X({parent:e}):s==="child"&&X(i=>be(me({},i),{child:e}))},Oe=()=>{if(typeof wp!="undefined"&&wp.media){const e=wp.media({title:"Media",button:{text:"Select picture"},library:{type:"image"},multiple:!1});e.on("select",()=>{const s=e.state().get("selection").first().toJSON();if(S){S(s.url);return}if(c==="opt"){const i=f[c];for(let a=0;a<i.length;a+=1)i[a].img=s.url;f[c]=i}else f[c]=s.url;B(i=>I(i,a=>{a[b]=f})),J(b),u(!1)}),e.open()}};d.useEffect(()=>{z({}),C([]),k([]),j.parent==="Icons"&&(w(!0),fetch("https://icons.bitapps.pro/search?c=0&").then(e=>e.json()).then(e=>{e&&(y(e.total),k(e.results)),w(!1)})),j.parent==="Downloaded Icons"&&(w(!0),q({},"bitforms_get_download_icn").then(e=>{e!==void 0&&e.success&&C(e==null?void 0:e.data),w(!1)}))},[j]);const ze=()=>{ee(!0),q({id:g.id,src:g.url},"bitforms_icn_save_setting").then(e=>{if(e!==void 0&&e.success){if(S){S(e.data);return}if(c==="opt"){const a=f[c];for(let n=0;n<a.length;n+=1)a[n].img=e.data;f[c]=a}else f[c]=e.data;let s=O,i=$;B(a=>(s=I(a,n=>{n[b]=f}),s)),h&&(i=I($,a=>{Object.keys($).forEach(n=>{const p=`${n}->fields->${P}->classes->.${P}-fld->padding`,m=xe($,p)||"",v=U(m,"left",!0),H=U(m,"",!0);c==="prefixIcn"&&W(a,p,v),c==="suffixIcn"&&W(a,p,H)})}),ne(i)),J(b),ve({event:`${je[c]} Icon Added`,type:`add_${c}`,state:{fldKey:b,fields:s,styles:i}})}ee(!1),u(!1)})},Re=e=>{var i;C(a=>a.filter(n=>n!==e));const s=new RegExp(e,"gi");(i=f[c])!=null&&i.match(s)&&(delete f[c],B(a=>I(a,n=>{n[b]=f}))),q({file:e},"bitforms_icon_remove").then(a=>{a!==void 0&&a.success&&C(a.data)}),ht.success("Icon Removed Successfully"),R(!1),Y&&Y(e)},re=e=>{e.target.parentNode.style.display="none"},de=e=>{const s=e.target.scrollHeight-e.target.scrollTop-e.target.clientHeight-100,i=_!==""?`&t=1_tag_${_}`:"";s<=0&&F.length<Ie&&(ae(!0),fetch(`https://icons.bitapps.pro/search?c=${F.length}&${M()}${i}`).then(a=>a.json()).then(a=>{a&&k(F.concat(a.results)),ae(!1)}))},Ve=(e,s,i)=>{const a=[...x];i===!1?(a[e].value=`t=1_id_${s.replace("t=2_id_","")}`,a[e].status=!0):(a[e].value=`t=2_id_${s.replace("t=1_id_","")}`,a[e].status=!1),De(a);const n=_!==""?`&t=1_tag_${_}`:"";x.length&&fetch(`https://icons.bitapps.pro/search?c=0&${M()}${n}`).then(p=>p.json()).then(p=>{if(p){let m=p.results;x.find(v=>v.status)&&(m=m==null?void 0:m.filter(v=>{var H;return(H=x.find(qe=>qe.id===v.id))==null?void 0:H.status})),k(m),y(p.total)}})},pe=()=>{if(S){S(g.url);return}f[c]=g.url;const e=I(O,i=>{i[b]=f});B(e);let s=$;h&&(s=I($,i=>{Object.keys($).forEach(a=>{const n=`${a}->fields->${P}->classes->.${P}-fld->padding`,p=xe($,n)||"",m=U(p,"left",!0),v=U(p,"",!0);c==="prefixIcn"&&W(i,n,m),c==="suffixIcn"&&W(i,n,v)})}),ne(s)),u(!1),ve({event:`${je[c]} Icon Added`,type:`add_${c}`,state:{fldKey:b,fields:e,styles:s}}),J(b)},he=(e,s)=>{z({id:e,url:s})};d.useEffect(()=>{Fe(""),C([]),D([]),w(!0),fetch(`https://api.unsplash.com/photos/?client_id=${E}&per_page=30&page=${ie}`).then(e=>e.json()).then(e=>{e&&(y(e.length),D(e)),w(!1)}),fetch(`https://api.unsplash.com/collections/?client_id=${E}&page=${Pe}`).then(e=>e.json()).then(e=>{e&&ce(e),w(!1)})},[]);const Ge=(e,s,i)=>{const a=[...G];a.map(n=>{n.status=!1}),i?a[e].status=!1:a[e].status=!0,ce(a),G.length&&!i?fetch(`https://api.unsplash.com/collections/${s}/photos?client_id=${E}&per_page=30`).then(n=>n.json()).then(n=>{n&&(D(n),y(n.length))}):fetch(`https://api.unsplash.com/photos/?client_id=${E}&per_page=30&page=${ie}`).then(n=>n.json()).then(n=>{n&&(D(n),y(n.length))})},Me=e=>{z({id:e.id,url:e.urls.regular})};return t.jsxs("div",{children:[t.jsx(ut,{options:oe,onChange:e=>Ae(e,"parent"),defaultActive:j.parent,defaultItmWidth:220,wideTab:!0,className:l(r.mt1)}),t.jsxs(A,{open:j.parent==="Icons",children:[t.jsx("div",{className:l(r.mt2,r.flxc,{flxp:1,jc:"center"}),children:x.map((e,s)=>t.jsx("button",{"data-testid":"icn-pck-btn",title:e.label,onClick:()=>Ve(s,e.value,e.status),type:"button",className:`${l(o.chip,r.mr2)} ${e.status&&l(o.active)}`,children:e.label},e.label))}),t.jsxs("div",{className:l(r.flxc,o.searchBar,r.mt2,r.mb2),children:[t.jsxs("div",{className:l(o.fields_search),children:[t.jsx("input",{"data-testid":"icns-mdl-srch-inp",title:"Search Icons","aria-label":"Search Icons",placeholder:"Search in 10,000+ icons by keywords one at a time. e.g., user or login or etc...",id:"search-icon",type:"search",name:"searchIcn",value:_,onChange:We,className:l(o.search_field)}),t.jsx("span",{title:"search",className:l(o.search_icn),children:t.jsx(st,{size:"20"})})]}),t.jsx("div",{children:Ne&&t.jsx(K,{size:20,clr:"#13132b"})})]}),t.jsxs(Q,{ref:N,style:{minHeight:350},onScroll:de,children:[L&&t.jsxs("div",{title:"Loading...",children:[t.jsx("div",{className:l(r.mt2)}),Array(26).fill(1).map((e,s)=>t.jsx("div",{title:"Loading...",className:`${l(o.loadingPlaceholder)} loader`},`loading-${s*2}`))]}),t.jsx("div",{className:l(r.flxc,r.mt2,o.icon),children:F.map(e=>t.jsx("button",{"data-testid":`inc-prv-btn-${e.name}`,type:"button",title:`${e.name} (${e.id})`,className:`${l(o.icnBtn)} ${V+e.url===g.url&&l(o.active,o.activeIcn)}`,onClick:()=>he(e.id,V+e.url),children:t.jsx("img",{src:`${V}${e.url}`,onError:re,alt:e.name,className:l(o.img)})},`${e.name} (${e.id})`))}),se&&t.jsxs("div",{title:"Loading...",children:[t.jsx("div",{className:l(r.mt2)}),Array(26).fill(1).map((e,s)=>t.jsx("div",{title:"Loading...",className:`${l(o.loadingPlaceholder)} loader`},`loading-2--${s*2}`))]})]}),t.jsxs("button",{"data-testid":"icn-dwnld-n-sav",type:"button",disabled:!g.url,className:l(o.saveBtn,o.btnPosition),onClick:ze,children:[t.jsx("span",{className:l(r.mr1),children:t.jsx(at,{size:"19"})}),"Download & save",T&&t.jsx(K,{size:20,clr:"#fff",className:r.ml2})]})]}),t.jsx(A,{open:j.parent==="Unsplash",children:t.jsxs("div",{children:[t.jsx("div",{className:l(r.mt2,r.flxc,{flxp:1,jc:"center"}),children:G.map((e,s)=>t.jsx("button",{"data-testid":"icn-pck-btn",title:e.title,onClick:()=>Ge(s,e.id,e.status),type:"button",className:`${l(o.chip,r.mr2)} ${e.status&&l(o.active)}`,children:e.title},e.title))}),t.jsxs(Q,{ref:N,style:{minHeight:350},onScroll:de,children:[L&&t.jsxs("div",{title:"Loading...",children:[t.jsx("div",{className:l(r.mt2)}),Array(26).fill(1).map((e,s)=>t.jsx("div",{title:"Loading...",className:`${l(o.loadingPlaceholder)} loader`},`loderfnt-${s*2}`))]}),t.jsx("div",{className:l(r.mt2,o.imgWrp),children:Le.map(e=>t.jsx("button",{type:"button",title:`(${e.description})`,className:`${l(o.imageBtn)} ${e.urls.regular===g.url&&l(o.activeImg)}`,onClick:()=>Me(e),children:t.jsx("img",{src:e.urls.thumb,onError:re,alt:e.id,className:l(o.imgH)})},`(${e.id})`))}),se&&t.jsxs("div",{title:"Loading...",children:[t.jsx("div",{className:l(r.mt2)}),Array(26).fill(1).map((e,s)=>t.jsx("div",{title:"Loading...",className:`${l(o.loadingPlaceholder)} loader`},`loderfnt--${s*2}`))]})]}),t.jsxs("button",{"data-testid":"icn-dwnld-n-sav",type:"button",disabled:!g.url,className:l(o.saveBtn,o.btnPosition),onClick:pe,children:[t.jsx("span",{className:l(r.mr1,{dy:"flex"}),children:t.jsx(lt,{size:"20"})}),"Save",T&&t.jsx(K,{size:20,clr:"#fff",className:r.ml2})]})]})}),t.jsx(A,{open:j.parent===le,children:t.jsxs("button",{type:"button",className:l(o.upBtn),onClick:Oe,children:[t.jsx(nt,{w:"35"})," ","Browse"]})}),t.jsxs(A,{open:j.parent==="Downloaded Icons",children:[L&&t.jsx("div",{className:l({h:300}),children:t.jsx("div",{title:"Loading...",className:l({flxp:"wrap",jc:"center",flx:1}),children:Array(22).fill(1).map((e,s)=>t.jsx("div",{title:"Loading...",className:`${l(o.loadingPlaceholder)} loader`},`loading-3-${s*2}`))})}),!L&&t.jsx(Q,{ref:N,style:{minHeight:"300px"},children:t.jsx("div",{className:l(r.flxc,r.mt4,o.icon),children:!!Z.length&&Z.map((e,s)=>t.jsxs("div",{className:l(r.flxc,r.mt2,o.downloadedBtnWrapper),"data-file":e,style:{display:"inline-block"},children:[t.jsx("button",{"data-testid":`dwnlodd-inc-del-btn-${s}`,type:"button",className:`${l(o.delBtn)} trash`,title:"Delete",onClick:()=>{R(!0),Be(e)},children:t.jsx(it,{size:10})}),t.jsx("button",{"data-testid":`dwnlodd-inc-prv-btn-${s}`,onClick:()=>he(e.id,`${bits.iconURL}/${e}`),type:"button",title:e.name,className:`${l(o.icnBtn)} ${`${bits.iconURL}/${e}`===g.url&&l(o.active)}`,children:t.jsx("img",{src:`${bits.iconURL}/${e}`,alt:`icon-${e}`,width:"40",height:"30"})},`download-icn-${s+Math.random()*5}`)]},`download-icn-${s*2}`))})}),t.jsx("button",{"data-testid":"icn-sav-btn",type:"button",disabled:!g.url,className:l(ot.btn,o.saveBtn),onClick:pe,children:"Save"})]}),t.jsx(ct,{title:"Warning",action:()=>Re(ke),show:Ce,body:"Are you sure you want to delete this icon? This icon will not be available in the forms where it has been used.",btnTxt:"Okay",close:()=>R(!1)})]})}const o={scrollBar:{scrollBehavior:"auto !important","& *":{scrollBehavior:"auto !important"}},loadingPlaceholder:{w:40,h:40,brs:8,lh:2,my:3,mx:5,dy:"inline-block"},downloadedBtnWrapper:{pn:"relative",dy:"inline-block","&:hover > .trash":{flx:"align-center"}},delBtn:{pn:"absolute",bd:"#ffa1a1",b:"none",brs:20,h:20,dy:"none",w:20,curp:1,rt:-3,tp:-3,":hover":{bd:"#ff7d7d"}},icon:{dy:"inline-block"},chip:{bd:"var(--b-100-48-1)",b:"none",brs:50,p:"6px 16px",cr:"var(--b-37-18)",m:"0px 7px 6px 0px",curp:1,tn:"background .3s",":hover":{bd:"var(--b-90)"}},active:{bd:"var(--b-50) !important",cr:"var(--white-100) !important"},activeIcn:{fr:"invert(100%) sepia(0%) saturate(6403%) hue-rotate(223deg) brightness(126%) contrast(109%)"},icnBtn:{p:"4px",mnw:45,h:45,dy:"inline-grid",placeContent:"center",bd:"transparent",b:"none",brs:8,curp:1,":hover":{bd:"var(--white-0-95)"}},img:{h:25},imgH:{brs:8,h:200},searchBar:{pn:"relative",zx:99},btnColor:{cr:"var(--b-50)"},fields_search:{pn:"relative",ml:7,mr:5,tn:"width .2s",w:"100%"},upBtn:{b:"1px solid var(--b-38-89)",w:"80%",bd:"var(--b-36-96)",fs:20,mx:"auto",h:100,flx:"center",fd:"column",brs:20,mt:10,cr:"var(--b-54-31)",curp:1,":hover":{bd:"var(--b-50-95)"},":focus-visible":{focusShadow:1}},search_icn:{pn:"absolute",tp:"50%",mx:9,lt:0,tm:"translateY(-50%)",cr:"var(--white-0-75)",curp:1,"& svg":{dy:"block"}},search_field:{w:"100%",fw:500,fs:"14px !important",oe:"none",b:"1px solid var(--white-0-75) !important",brs:"20px !important",pl:"35px !important",pr:"5px !important",pb:"5px !important",pt:"5px !important",":focus":{bs:"0px 0px 0px 1.5px var(--b-50) !important",bcr:"var(--b-92-62) !important",pr:"0px !important","& ~ .shortcut":{dy:"none"},"& ~ span svg":{cr:"var(--b-50)"}},"::placeholder":{fs:12},"::-webkit-search-cancel-button":{appearance:"none",w:14,h:14,mr:10,bd:"var(--white-0-83)",curp:1,backgroundPosition:"54% 50% !important",bi:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 24 24' fill='none' stroke='Black' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='18' y1='6' x2='6' y2='18'%3E%3C/line%3E%3Cline x1='6' y1='6' x2='18' y2='18'%3E%3C/line%3E%3C/svg%3E")`,brs:20}},saveBtn:{b:"none",bd:"var(--b-50)",brs:8,fw:500,p:"5px 10px",cr:"var(--white-100)",flxc:1,flx:"center",mt:5,ml:"auto",mr:5,curp:1,tn:"background .3s",":hover:not(:disabled)":{bd:"var(--b-36)"},":disabled":{bd:"var(--b-13-88)",cr:"var(--b-16-35)",cur:"not-allowed"}},imageBtn:{p:0,mxh:200,dy:"block",bd:"none",b:"none",m:5,brs:8,curp:1,":hover":{oe:"4px solid var(--blue)"}},imgWrp:{dy:"flex",flxp:"wrap",jc:"center",w:"100%"},activeImg:{oe:"4px solid var(--blue)"}};function _t(){const{css:h}=$e();return t.jsx("hr",{className:h(ft.divider)})}export{_t as F,wt as I};
